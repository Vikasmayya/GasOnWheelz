{"version":3,"sources":["admin/Search.js"],"names":["Search","showAlert","location","useLocation","history","useHistory","retrieval","sessionStorage","getItem","useState","results","setResults","useEffect","searchText","state","getPostFromFirebase","firebaseData","firestore","collection","where","onSnapshot","querySnapshot","empty","push","forEach","doc","data","key","id","e","nKG","setnKG","nncprice","setnncprice","documentSnapshot","price","ncprice","sKG","setsKG","sncprice","setsncprice","alert","tKG","settKG","tncprice","settncprice","map","result","name","phone","nKGD","sKGD","tKGD","delivery","className","to","style","marginRight"],"mappings":"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","file":"static/js/28.3aece653.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { firestore } from '../Firebase';\r\nimport { useLocation,useHistory, NavLink } from \"react-router-dom\";\r\n\r\nconst Search = ({showAlert}) => {\r\n    const location = useLocation();\r\n    let history = useHistory();\r\n    var retrieval = sessionStorage.getItem('role');\r\n    const [results, setResults] =useState([]);\r\n    useEffect(() =>{\r\n      let searchText\r\n    try {\r\n      searchText = location.state[\"searchText\"] ?? []\r\n      const getPostFromFirebase = [];\r\n        const firebaseData = firestore.collection(\"customers\")\r\n        .where('phone', '==',searchText)\r\n        .onSnapshot((querySnapshot) =>{\r\n          if(!querySnapshot.empty){\r\n            querySnapshot.forEach( doc => {\r\n              getPostFromFirebase.push({...doc.data(), key: doc.id,});\r\n          });\r\n          setResults(getPostFromFirebase);\r\n          }else{\r\n            history.push(\"/Registration\");        \r\n            showAlert(\"Sorry! No such Customer Exists. Please check if the phone Number is correct. Or else get this customer Registered.\",\"danger\")\r\n          }\r\n        });\r\n        return () => firebaseData();\r\n    } catch(e) {\r\n      history.push(\"/Registration\");\r\n    } }, [location, history, showAlert]);\r\n\r\n    const [nKG, setnKG] =useState([]);\r\n    const [nncprice, setnncprice] =useState([]);\r\n    useEffect(() =>{\r\n        const firebaseData = firestore.collection(\"price_list\")\r\n        .doc(\"19KG\")\r\n        .onSnapshot(documentSnapshot =>{\r\n          try{\r\n            setnKG((documentSnapshot).data().price)\r\n            setnncprice((documentSnapshot).data().ncprice)\r\n          }\r\n          catch(e) {\r\n            history.push(\"/Registration\");\r\n          }\r\n      });\r\n        return () => firebaseData();\r\n    }, [history]);\r\n    const [sKG, setsKG] =useState([]);\r\n    const [sncprice, setsncprice] =useState([]);\r\n    useEffect(() =>{\r\n        const firebaseData = firestore.collection(\"price_list\")\r\n        .doc(\"17KG\")\r\n        .onSnapshot(documentSnapshot =>{\r\n          try{\r\n            setsKG((documentSnapshot).data().price)\r\n            setsncprice((documentSnapshot).data().ncprice)\r\n          }\r\n          catch(e) {\r\n            alert(\"network lost\")\r\n            history.push(\"/Registration\");\r\n          }\r\n      });\r\n        return () => firebaseData();\r\n    }, [history]);\r\n    const [tKG, settKG] =useState([]);\r\n    const [tncprice, settncprice] =useState([]);\r\n    useEffect(() =>{\r\n        const firebaseData = firestore.collection(\"price_list\")\r\n        .doc(\"12KG\")\r\n        .onSnapshot(documentSnapshot =>{\r\n          try{\r\n            settKG((documentSnapshot).data().price)\r\n            settncprice((documentSnapshot).data().ncprice)\r\n          }\r\n          catch(e) {\r\n            alert(\"network lost\")\r\n            history.push(\"/Registration\");\r\n          }\r\n      });\r\n        return () => firebaseData();\r\n    }, [history]);\r\n    \r\n  return (\r\n    <>\r\n       {\r\n        results.map((result) => {\r\n              const { key, name, phone, nKGD, sKGD, tKGD, delivery } = result; \r\n            return(\r\n            <div key={key} className=\"results\" >\r\n                {/* <CData name={name} phone={phone} nKGP={nKG-nKGD+delivery} sKGP={sKG-sKGD+delivery} tKGP={tKG-tKGD+delivery} delivery={delivery}/> */}\r\n                <div className=\"col-md-4 col-10 mx-auto\">\r\n            <div className=\"card \">\r\n                <div className=\"card-header\">\r\n                    <h5 className=\"card-title fw-bold\">{name}</h5>\r\n                    <p className=\"card-text\">Phone Number : {phone}</p>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                    <h5 className=\"card-title fw-bold\">View Customer's Order history</h5>\r\n                    <NavLink to={`/RefillOrders/${phone}`} className=\"btn btn-primary\" style={{marginRight: \"0.5rem\"}}>Refill Orders</NavLink>\r\n                    <NavLink to={`/NCorders/${phone}`} className=\"btn btn-primary\" style={{marginRight: \"0.5rem\"}}>N/C Orders</NavLink>               \r\n                </div>\r\n                <hr/>\r\n                <div className=\"card-body\">\r\n                    <h5 className=\"card-title fw-bold\">12KG Price(including Delivery) : {tKG-tKGD+delivery}</h5>\r\n                    <h5 className=\"card-title fw-bold\">12KG New Connection/Cylinder Price : {tncprice}</h5>\r\n                    <p className=\"card-text\">Delivery Charges : {delivery}</p>\r\n                    <NavLink to={`/Booking/${phone}/12KG/${tKG-tKGD+delivery}/${name}/REFILL`} className=\"btn btn-primary\" style={{marginRight: \"0.5rem\"}}>12KG Refill</NavLink>\r\n                    <span><NavLink to={`/NCBooking/${phone}/12KG/${tKG-tKGD+delivery+tncprice}/${name}/NEW_CONNECTION`} className=\"btn btn-primary\" style={{marginRight: \"0.5rem\"}}>12KG N/C</NavLink></span>\r\n                </div>\r\n                <hr/>\r\n                <div className=\"card-body\">\r\n                    <h5 className=\"card-title fw-bold\">17KG Price(including Delivery) : {sKG-sKGD+delivery}</h5>\r\n                    <h5 className=\"card-title fw-bold\">17KG New Connection/Cylinder Price : {sncprice}</h5>\r\n                    <p className=\"card-text\">Delivery Charges : {delivery}</p>\r\n                    <NavLink to={`/Booking/${phone}/17KG/${sKG-sKGD+delivery}/${name}/REFILL`} className=\"btn btn-primary\" style={{marginRight: \"0.5rem\"}}>17KG Refill</NavLink>\r\n                    <span><NavLink to={`/NCBooking/${phone}/17KG/${sKG-sKGD+delivery+sncprice}/${name}/NEW_CONNECTION`} className=\"btn btn-primary\" style={{marginRight: \"0.5rem\"}}>17KG N/C</NavLink></span>\r\n                </div>\r\n                <hr/>\r\n                <div className=\"card-body\">\r\n                    <h5 className=\"card-title fw-bold\">19KG Price(including Delivery) : {nKG-nKGD+delivery}</h5>\r\n                    <h5 className=\"card-title fw-bold\">19KG New Connection/Cylinder Price : {nncprice}</h5>\r\n                    <p className=\"card-text\">Delivery Charges : {delivery}</p>\r\n                    <NavLink to={`/Booking/${phone}/19KG/${nKG-nKGD+delivery}/${name}/REFILL`} className=\"btn btn-primary\" style={{marginRight: \"0.5rem\"}}>19KG Refill</NavLink>\r\n                    <span><NavLink to={`/NCBooking/${phone}/19KG/${nKG-nKGD+delivery+nncprice}/${name}/NEW_CONNECTION`} className=\"btn btn-primary\" style={{marginRight: \"0.5rem\"}}>19KG N/C</NavLink></span>\r\n                </div>\r\n                {retrieval===\"admin\" ?\r\n                <>\r\n                <hr/>\r\n                <div className=\"card-body\">\r\n                    <h5 className=\"card-title fw-bold\">Edit Customer Details</h5>\r\n                    <NavLink to={`/CustomerInfo/${key}`} className=\"btn btn-primary\">Edit</NavLink>\r\n                </div>\r\n                </>\r\n                : null }\r\n            </div>\r\n            </div>\r\n            </div>\r\n            )\r\n        })\r\n       }\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Search;"],"sourceRoot":""}