{"version":3,"sources":["images/project_orange_logo.png","FPass.js","Login.js"],"names":["FPass","handleClose","useState","uid","data","setData","className","onSubmit","e","preventDefault","firebaseAuth","sendPasswordResetEmail","then","alert","catch","error","message","htmlFor","style","backgroundColor","fontSize","type","id","name","value","onChange","event","target","preVal","placeholder","pattern","required","width","Button","textTransform","fontWeight","variant","onClick","withRouter","history","currentUser","useContext","AuthContext","open","setOpen","email","password","showPassword","values","setValues","handleChange","prop","handleLogin","useCallback","a","elements","setPersistence","firebase","auth","Auth","Persistence","SESSION","signInWithEmailAndPassword","userCredential","user","to","firestore","collection","doc","get","snapshot","dbUser","roles","sessionStorage","setItem","push","errorCode","code","errorMessage","Container","maxWidth","Box","sx","p","boxShadow","borderRadius","src","logo","alt","height","Typography","color","Input","fontFamily","startAdornment","fullWidth","endAdornment","IconButton","onMouseDown","VisibilityOff","Visibility","disableElevation","Modal","onClose","position","top","left","transform","bgcolor"],"mappings":"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","file":"static/js/22.2d4b9bee.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/project_orange_logo.90ce7bd7.png\";","import { Button} from '@mui/material';\r\nimport React, { useState } from 'react';\r\nimport { firebaseAuth } from './Firebase';\r\n\r\nconst FPass = ({handleClose}) => {\r\n    const[data,setData] = useState({\r\n        uid:\"\",\r\n    });\r\n    const InputEvent= (event)=>{\r\n        const {name,value} = event.target;\r\n        setData((preVal) =>{\r\n            return{...preVal, [name] : value,}\r\n        });\r\n      };\r\n\r\n      const formSubmit =(e) =>{\r\n        e.preventDefault();\r\n        firebaseAuth.sendPasswordResetEmail(data.uid)\r\n        .then(() =>{\r\n          alert(`Password Reset mail has been sent to ${data.uid}.`)\r\n          setData({ uid:\"\",})\r\n          handleClose();\r\n        })\r\n        .catch(error => {\r\n            alert(error.message);\r\n        });\r\n      };\r\n  return (\r\n    <>\r\n      <div className=\"container\">\r\n        <div className=\"my-1 text-nowrap \">\r\n            <h3 className=\"text-center mb-5 fw-bolder\">Password Reset </h3>\r\n        </div>\r\n        <div className=\"row\">\r\n        <div className=\"col\">\r\n            <form onSubmit={formSubmit}>\r\n              <div className=\"mb-3\">\r\n              <label htmlFor=\"exampleFormControlInput1\" className=\"form-label fw-bold\">User ID</label>\r\n              <input style={{backgroundColor:\"#F6FAFD\", fontSize:'1.125rem'}} type=\"text\" className=\"form-control\" id=\"exampleFormControlInput1\" name=\"uid\" value={data.uid} onChange={InputEvent} placeholder=\"Enter your User ID\" pattern=\"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$\" required/>\r\n              </div>\r\n                <button style={{width:\"100%\"}} className=\"btn btn-primary\" type=\"submit\">Send Mail</button>\r\n            </form>\r\n            <div className=\"col-12  mt-3\">\r\n            <Button style={{textTransform:'capitalize',fontWeight:'bold'}}  className=\" w-100\" variant='text' onClick={handleClose}>Cancel</Button>\r\n            </div>\r\n        </div>\r\n        </div>\r\n      </div> \r\n    </>\r\n  )\r\n}\r\n\r\nexport default FPass;","import { Button, Container, Typography,Modal, Input, IconButton } from '@mui/material';\r\nimport { Box } from '@mui/system';\r\nimport logo from \"./images/project_orange_logo.png\";\r\nimport React, { useCallback, useContext, useState } from 'react';\r\nimport { Redirect, withRouter } from 'react-router-dom';\r\nimport { AuthContext } from './Auth';\r\nimport firebase,{ firebaseAuth, firestore} from './Firebase';\r\nimport FPass from './FPass';\r\nimport EmailOutlinedIcon from '@mui/icons-material/EmailOutlined';\r\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\r\nimport { Visibility, VisibilityOff } from '@mui/icons-material';\r\n\r\nconst Login = ({history}) => {\r\n    const {currentUser} = useContext(AuthContext);\r\n    const [open, setOpen] = useState(false);\r\n    const handleClose = () => setOpen(false);\r\n\r\n    const[values,setValues] = useState({email:'',password:'',showPassword: false,});\r\n\r\n    const handleChange = (prop) => (event) => {\r\n        setValues({ ...values, [prop]: event.target.value });\r\n      };\r\n\r\n    const style = {\r\n        position: 'absolute',\r\n        top: '47.5%',\r\n        left: '50%',\r\n        transform: 'translate(-50%, -50%)',\r\n        width: 400,\r\n        bgcolor: 'white',\r\n        borderRadius: '1.125rem',\r\n        boxShadow: 24,\r\n        p: 6,\r\n    };\r\n\r\n    const handleClickShowPassword = () => {\r\n        setValues({\r\n          ...values,\r\n          showPassword: !values.showPassword,\r\n        });\r\n      };\r\n    \r\n      const handleMouseDownPassword = (event) => {\r\n        event.preventDefault();\r\n      };\r\n\r\n    const handleLogin = useCallback(async event => {\r\n        event.preventDefault();\r\n        const {email, password} = event.target.elements;\r\n        \r\n        try{\r\n            await firebaseAuth.setPersistence(firebase.auth.Auth.Persistence.SESSION);\r\n            await firebaseAuth\r\n            .signInWithEmailAndPassword(email.value, password.value).then((userCredential) => {\r\n                // Signed in\r\n                var user = userCredential.user;\r\n                // ...\r\n                // console.log(user.uid);\r\n                if(user){\r\n                    firestore.collection(\"USERS\").doc(user.uid).get()\r\n                    .then(snapshot =>{\r\n                        const dbUser = snapshot.data();\r\n                    // default empty roles\r\n                    try{\r\n                        if (!dbUser.roles) {\r\n                            dbUser.roles = {};\r\n                        }\r\n                    }catch(error){\r\n                        return <Redirect to=\"/\"/>;\r\n                    }\r\n                    \r\n                    // merge auth and db user\r\n                    user = {\r\n                        uid: user.uid,\r\n                        email: user.email,\r\n                        ...dbUser,\r\n                      };\r\n                      sessionStorage.setItem('user_name', email.value);\r\n                      sessionStorage.setItem('useraim', password.value);\r\n                      sessionStorage.setItem('role', user[\"role\"]);\r\n                      sessionStorage.setItem('name', user[\"name\"]);\r\n                      history.push(\"/homepage\");\r\n                    });\r\n                } else {\r\n                    alert(\"Incorrect User Credentials\");\r\n                    return <Redirect to=\"/\"/>;\r\n                }\r\n              })\r\n              .catch((error) => {\r\n                var errorCode = error.code;\r\n                var errorMessage = error.message;\r\n                alert(errorCode,errorMessage);\r\n              });\r\n            \r\n        }catch(error){\r\n            alert(\"Incorrect User Credentials\");\r\n        }\r\n    }, [history]);\r\n    \r\n\r\n    if(currentUser) {\r\n        return <Redirect to=\"/homepage\"/>;\r\n    }\r\n\r\n    return (\r\n        <>\r\n        <Container maxWidth=\"xs\">\r\n        <Box sx={{p: \"24px\",boxShadow:\"0px 10px 45px 0px rgba(0, 0, 0, 0.1)\",borderRadius:\"15px\",backgroundColor: \"#ffff\"}} >\r\n           <div className='w-100 text-center bg-white'>\r\n            <img src={logo} alt=\"\"  height=\"60px\" width=\"60px\"/>\r\n           </div>\r\n            <Typography color=\"textPrimary\" className=\"fw-bold mt-3\" variant=\"h4\">Welcome back <br/> to <span style={{color:'#FF6700'}}> Gaz on Wheelz </span></Typography>\r\n            <form onSubmit={handleLogin}>\r\n            <div style={{width:\"100%\"}} className=\"my-4\">\r\n              <label className=\"fw-bold\">Email </label><br/>\r\n              <Input\r\n                sx={{fontWeight:'bold', fontFamily:'Sen', color:'primary'}}\r\n                id=\"standard-adornment-amount\"\r\n                value={values.email}\r\n                onChange={handleChange('email')} \r\n                placeholder=\" Enter your Email\" name=\"email\"\r\n                startAdornment={<EmailOutlinedIcon/>}\r\n                fullWidth required\r\n              />\r\n            </div>\r\n            <div style={{width:\"100%\"}} >\r\n              <label className=\"fw-bold\">Password </label><br/>\r\n              <Input\r\n                sx={{fontWeight:'bold', fontFamily:'Sen', color:'primary'}}\r\n                id=\"standard-adornment-amount\"\r\n                placeholder=\" Enter your Password\" name=\"password\" \r\n                value={values.password}\r\n                onChange={handleChange('password')} \r\n                type={values.showPassword ? 'text' : 'password'}\r\n                startAdornment={<LockOutlinedIcon/>}\r\n                endAdornment={\r\n                    <IconButton\r\n                    aria-label=\"toggle password visibility\"\r\n                    onClick={handleClickShowPassword}\r\n                    onMouseDown={handleMouseDownPassword}\r\n                    >\r\n                    {values.showPassword ? <VisibilityOff /> : <Visibility />}\r\n                    </IconButton>\r\n                }\r\n                fullWidth required\r\n              />\r\n            </div>\r\n            <Button sx={{fontSize:'0.8rem', textTransform:\"capitalize\"}} onClick={() => {setOpen(true) }}>Forgot Password?</Button>\r\n            <br/>\r\n            <br/>\r\n            <Button sx={{borderRadius:\"2.5em\"}} disableElevation type=\"submit\" variant=\"contained\" color=\"primary\" fullWidth>LOGIN</Button>\r\n           </form>\r\n           </Box>\r\n        </Container>\r\n        <Modal\r\n            open={open}\r\n            onClose={handleClose}\r\n            aria-labelledby=\"modal-modal-title\"\r\n            aria-describedby=\"modal-modal-description\">\r\n                <Box sx={style}>\r\n                <FPass handleClose={handleClose}/>\r\n                </Box>\r\n        </Modal>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default withRouter(Login);"],"sourceRoot":""}